<html>

<head>
    <link rel="icon" href="img/favicon.png">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>

<body>
    <div id="app" class="container-fluid">
        <div>
            <div class="row">
                <h1>{{ creatingPurchase ? 'New Purchase' : creatingItem ? 'New Item' :'Overview'}}</h1>
            </div>
            <div v-if="creatingPurchase">
                <purchase-component :item="itemSelected" @oncancel="cancelNewPurchase" @onsuccess="onSuccess" @onerror="onError"></purchase-component>
            </div>
            <div v-if="creatingItem">
                <item-component :item="itemSelected" :groups="groups" :previous-group="filterGroup" @oncancel="cancelNewItem" @onsuccess="onSuccess" @onerror="onError"></item-component>
            </div>

            <div v-if="!creatingPurchase && !creatingItem">
                <div class="row form_inputs">
                    <select v-model="filterGroup"  >
                        <option>Todos</option>
                        <option v-for="g in groups">{{g}}</option>
                    </select>
                </div>
                <line-component v-for="item in filteredItems" :item="item" @new="newPurchase"></line-component>
            </div>
            <div v-if="!creatingPurchase && !creatingItem" class="row">
                <div class="col-12">
                    <button style="margin-top: 15px;" class="btn btn_new prices btn-primary " @click="newItem">New Item</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script id="lineCmp" type="text/x-template">
        <div class="row line">
            <div class="col-3">
                <div class="row">
                    {{item.initial}}    
                </div>
                <div class="row">
                    {{item.name}}
                </div>
            </div>
            <div class="col-2 ">
                <button type="button" class="btn  prices red">{{priceText(item.highestPrice)}}</button>
            </div>
            <div class="col-2 ">
                <button type="button" class="btn  prices green">{{priceText(item.lowestPrice)}}</button>
            </div>
            <div class="col-2 ">
                <button type="button" class="btn  prices gray">{{priceText(item.lastPrice)}}</button>
            </div>
            <div class="col-2 ">
                <button type="button" class="btn  btn_new prices btn-primary" @click="clickNew">New</button>
            </div>
        </div>    
    </script>



<script id="purchaseCmp" type="text/x-template">
        <div class="form">
            <div class="row">
                <div class="col-12">
                    <span class="form_title">{{item.name}}</span>
                </div>
            </div>
            <div class="form_inputs row">
                <div class="col-3 label">
                    Price:
                </div>
                <div class="col-8 ">
                    <input v-model.number="model.price" type="number" />
                </div>
                <div class="col-3 label ">
                    Quantity:
                </div>
                <div class="col-8 ">
                    <input  v-model.number="model.qtd" type="number"/>
                </div>
            </div>
            <div style="color:red" clss="row">
                *Price should be integer. Example 1.00 = 100
            </div>
            <div class="row">
                <div class="col-6 ">
                    <button type="button" class="btn  prices btn_cancel btn-secondary" @click="cancel" >Cancelar</button>
                </div>
                <div class="col-6 ">
                    <button type="button" class="btn  prices btn_new btn-primary" @click="save" >Salvar</button>
                </div>
            </div>
        </div>    
</script>

<script id="itemCmp" type="text/x-template">
    <div class="form">
        <div class="row">
            <div class="col-12">
                <span class="form_title">Fill new items details</span>
            </div>
        </div>
        <div class="form_inputs row">
            <div class="col-3 label">
                Initial:
            </div>
            <div class="col-8 ">
                <input v-model="model.initial" maxlength="5" />
            </div>
            <div class="col-3 label ">
                Name:
            </div>
            <div class="col-8 ">
                <input  v-model.name="model.name" />
            </div>
            <div class="col-3 label ">
                Group:
            </div>
            <div class="col-8 ">
                <select v-model="model.group" >
                    <option v-for="g in groups">{{g}}</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-6 ">
                <button type="button" class="btn  prices btn_cancel btn-secondary" @click="cancel" >Cancelar</button>
            </div>
            <div class="col-6 ">
                <button type="button" class="btn  prices btn_new btn-primary" @click="save" >Salvar</button>
            </div>
        </div>
    </div>    
</script>


<script src="js/axios.min.js" type="text/javascript"></script>
<script src="js/vue.min.js" type="text/javascript"></script>
<script src="js/components.js" type="text/javascript"></script>
<script src="js/app.js" type="text/javascript"></script>

</html>